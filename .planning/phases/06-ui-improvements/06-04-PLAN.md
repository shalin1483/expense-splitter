---
phase: 06-ui-improvements
plan: "04"
type: execute
wave: 3
depends_on: ["06-01", "06-02", "06-03"]
files_modified:
  - src/components/PeopleStep.tsx
  - src/components/ItemsStep.tsx
autonomous: true

must_haves:
  truths:
    - "PeopleStep renders with Tailwind classes — no old CSS class names (no .remove-btn, no form global styles)"
    - "ItemsStep renders with Tailwind classes — no old CSS class names (no .item-row, no .items-total)"
    - "Add People form is mobile-friendly: 44px touch targets, 16px font on input"
    - "Add Items form has decimal keyboard on mobile (inputMode='decimal')"
    - "Remove buttons are visually clear (red text, transparent background)"
    - "Both components work identically to before — add/remove people and items"
    - "All existing PeopleStep and ItemsStep tests pass"
  artifacts:
    - path: "src/components/PeopleStep.tsx"
      provides: "PeopleStep with Tailwind utility classes replacing all BEM CSS"
      contains: "className=\""
    - path: "src/components/ItemsStep.tsx"
      provides: "ItemsStep with Tailwind utility classes replacing all BEM CSS"
      contains: "className=\""
  key_links:
    - from: "src/components/PeopleStep.tsx"
      to: "billStore"
      via: "usePeopleActions, usePeople hooks"
      pattern: "usePeople"
    - from: "src/components/ItemsStep.tsx"
      to: "billStore"
      via: "useItems, useItemActions hooks"
      pattern: "useItems"
---

<objective>
Migrate PeopleStep.tsx and ItemsStep.tsx from plain CSS class names to Tailwind utility classes.

Purpose: These are the first two wizard steps (Wave 1 of user flow). Once migrated, these components no longer depend on any CSS rules from App.css — they are fully self-contained. Establishing patterns here (form layout, list items, remove buttons, validation messages) sets conventions for the remaining step components in plans 05 and 06.

Output: PeopleStep.tsx and ItemsStep.tsx both fully Tailwind-styled with zero old BEM class dependencies.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-ui-improvements/06-RESEARCH.md
@.planning/phases/06-ui-improvements/06-01-SUMMARY.md
@src/components/PeopleStep.tsx
@src/components/ItemsStep.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate PeopleStep to Tailwind</name>
  <files>src/components/PeopleStep.tsx</files>
  <action>
Read the current PeopleStep.tsx first to understand all existing elements, then rewrite the JSX with Tailwind utility classes. Preserve ALL logic — only change className strings and structural wrapper elements as needed. Do NOT change:
- The exported function signature `export function PeopleStep()`
- The exported `canProceedFromPeople` function
- Any store hook calls or state management
- Any event handlers or business logic

CSS mapping to apply (each CSS class → Tailwind equivalent):
- `form` element: `flex gap-2 mb-4` (keep flex layout for input + button)
- `input[type="text"]`: `flex-1 px-3 py-3 text-base border border-zinc-300 dark:border-zinc-600 rounded-md min-h-[44px] bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-50 placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent`
- Add button (primary): `px-4 py-3 text-base rounded-md bg-brand text-white hover:bg-brand-hover min-h-[44px] transition-colors active:scale-95 disabled:opacity-40 disabled:cursor-not-allowed`
- `ul`: `list-none p-0 m-0 space-y-0`
- `li` (person row): `flex justify-between items-center py-2 border-b border-zinc-100 dark:border-zinc-800`
- Remove button: `p-2 min-w-[44px] min-h-[44px] flex items-center justify-center rounded-md bg-transparent text-danger hover:bg-danger-light dark:hover:bg-danger/10 transition-colors text-xl`
- Validation message: `text-center mt-4 text-sm text-zinc-500 dark:text-zinc-400`
- Error text: add `text-danger` color

After rewriting, verify there are no references to old CSS classes: `.remove-btn`, `.validation`, `.error`, or any implicit reliance on the global `form`, `input`, `button`, `ul`, `li` element rules that were in the old App.css (those are now gone).
  </action>
  <verify>
Run: `npx vitest run src/components/PeopleStep.test.tsx 2>&1 | tail -20`
Expected: All PeopleStep tests pass.
Run: `grep -E "className=\"[^\"]*remove-btn|className=\"[^\"]*validation" src/components/PeopleStep.tsx`
Expected: No matches (old CSS classes removed).
  </verify>
  <done>PeopleStep.tsx uses only Tailwind classes. canProceedFromPeople still exported. All PeopleStep tests pass.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate ItemsStep to Tailwind</name>
  <files>src/components/ItemsStep.tsx</files>
  <action>
Read the current ItemsStep.tsx first, then rewrite JSX with Tailwind utility classes. Preserve ALL logic — only change className strings. Do NOT change the exported `canProceedFromItems` function.

CSS mapping to apply:
- `form` element: `flex gap-2 mb-4`
- Item name input: `flex-1 px-3 py-3 text-base border border-zinc-300 dark:border-zinc-600 rounded-md min-h-[44px] bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-50 placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent`
- Item price input: `w-28 px-3 py-3 text-base border border-zinc-300 dark:border-zinc-600 rounded-md min-h-[44px] bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-50 placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent font-mono` (keep inputMode="decimal")
- Add button: same primary button style as PeopleStep
- `ul`: `list-none p-0 m-0`
- `li` (item row, `.item-row`): `flex gap-2 items-center py-2 border-b border-zinc-100 dark:border-zinc-800`
  - Item name span (`.item-name`): `flex-1 text-zinc-900 dark:text-zinc-50`
  - Item price span (`.item-price`): `font-mono tabular-nums text-zinc-700 dark:text-zinc-300 whitespace-nowrap`
  - Remove button: same style as PeopleStep remove button
- Items total (`.items-total`): `text-right font-semibold mt-2 pt-2 border-t border-zinc-300 dark:border-zinc-600 text-zinc-900 dark:text-zinc-50`
- Validation message: `text-center mt-4 text-sm text-zinc-500 dark:text-zinc-400`

The price input must retain `inputMode="decimal"` and `type="number"` attributes unchanged (these are functional, not cosmetic).
  </action>
  <verify>
Run: `npx vitest run src/components/ItemsStep.test.tsx 2>&1 | tail -20`
Expected: All ItemsStep tests pass.
Run: `grep -E "className=\"[^\"]*item-row|className=\"[^\"]*items-total|className=\"[^\"]*item-price" src/components/ItemsStep.tsx`
Expected: No matches (old CSS classes removed).
  </verify>
  <done>ItemsStep.tsx uses only Tailwind classes. canProceedFromItems still exported. All ItemsStep tests pass.</done>
</task>

</tasks>

<verification>
1. `npx vitest run src/components/PeopleStep.test.tsx src/components/ItemsStep.test.tsx` — all tests pass
2. `npm run build` exits 0
3. `grep "remove-btn\|validation\|item-row\|items-total" src/components/PeopleStep.tsx src/components/ItemsStep.tsx` — no matches
4. Both files contain `dark:` variant classes (confirms dark mode support is baked in)
</verification>

<success_criteria>
- PeopleStep.tsx: zero references to old CSS class names, all Tailwind classes, dark: variants present, canProceedFromPeople exported, all tests pass
- ItemsStep.tsx: zero references to old CSS class names, all Tailwind classes, dark: variants present, canProceedFromItems exported, all tests pass
- npm run build exits 0
</success_criteria>

<output>
After completion, create `.planning/phases/06-ui-improvements/06-04-SUMMARY.md` following the summary template.
</output>
