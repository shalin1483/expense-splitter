---
phase: 06-ui-improvements
plan: "01"
type: execute
wave: 1
depends_on: []
files_modified:
  - vite.config.ts
  - src/main.tsx
  - src/App.css
autonomous: true

must_haves:
  truths:
    - "npm run build completes without errors after installation"
    - "Tailwind utility classes (e.g., bg-blue-600) render correctly in the browser"
    - "shadcn/ui components are available at src/components/ui/"
    - "CSS design tokens (--color-brand, --background, --card, --foreground, --border) are defined and usable"
    - "The dark: variant is wired via @custom-variant so dark: classes work when .dark is on <html>"
  artifacts:
    - path: "vite.config.ts"
      provides: "@tailwindcss/vite plugin registered"
      contains: "@tailwindcss/vite"
    - path: "src/App.css"
      provides: "Tailwind base import + design tokens"
      contains: "@import \"tailwindcss\""
    - path: "src/components/ui/button.tsx"
      provides: "shadcn/ui Button component"
    - path: "src/components/ui/progress.tsx"
      provides: "shadcn/ui Progress component"
    - path: "src/components/ui/card.tsx"
      provides: "shadcn/ui Card components"
  key_links:
    - from: "vite.config.ts"
      to: "tailwindcss"
      via: "@tailwindcss/vite plugin"
      pattern: "@tailwindcss/vite"
    - from: "src/main.tsx"
      to: "src/App.css"
      via: "import './App.css'"
      pattern: "import.*App.css"
---

<objective>
Install Tailwind CSS v4, initialize shadcn/ui, and replace App.css with the token-based CSS foundation that all subsequent plans build on.

Purpose: Every component migration plan (02-07) depends on Tailwind utility classes and shadcn/ui components being available. This is the sole infrastructure plan — nothing else can start until it is complete.

Output: Tailwind v4 wired into Vite build, shadcn/ui CLI initialized with new-york style, App.css replaced with @import + design tokens + dark variant + minimal global resets.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-ui-improvements/06-RESEARCH.md
@vite.config.ts
@src/main.tsx
@src/App.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Tailwind CSS v4, shadcn/ui, motion, and sonner</name>
  <files>package.json, vite.config.ts</files>
  <action>
Run the following installs in sequence:

```bash
cd /Users/shalinpatel/Localfiles/Programming/Learnings/CC-GSD/gsd-module-test
npm install tailwindcss @tailwindcss/vite
npm install motion sonner
npm install -D @types/node
```

Then run shadcn CLI init (use --force to accept React 19 peer dep warnings, use new-york style, oklch colors, no CSS variables override since we set our own, path alias @ already configured):
```bash
npx shadcn@latest init --yes --force
```

When prompted (or via flags), choose:
- Style: new-york
- Color: zinc (base neutral — we define brand colors ourselves in App.css)
- Use CSS variables: yes

After init completes, add the components needed for this phase:
```bash
npx shadcn@latest add button card progress badge --yes --force
npx shadcn@latest add sonner --yes --force
```

Then update `vite.config.ts` to register the Tailwind v4 Vite plugin INSTEAD of the old PostCSS approach. The final vite.config.ts must be:

```typescript
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import tailwindcss from '@tailwindcss/vite';
import path from 'path';

export default defineConfig({
  plugins: [
    tailwindcss(),
    react(),
  ],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src')
    }
  },
  server: {
    port: 5173
  }
});
```

Important: tailwindcss() must come BEFORE react() in the plugins array.
  </action>
  <verify>
Run: `npm run build 2>&1 | tail -20`
Expected: Build completes with no errors (warnings about peer deps are OK).
Run: `ls src/components/ui/`
Expected: button.tsx, card.tsx, progress.tsx, badge.tsx visible.
  </verify>
  <done>npm run build succeeds, src/components/ui/ contains shadcn components, vite.config.ts has @tailwindcss/vite plugin.</done>
</task>

<task type="auto">
  <name>Task 2: Replace App.css with Tailwind v4 token-based foundation</name>
  <files>src/App.css</files>
  <action>
Completely replace the contents of `src/App.css` with the following. This keeps ONLY global resets and design tokens — all component-specific CSS is deleted here and will be replaced by Tailwind utility classes in subsequent plans. Do NOT keep any BEM class rules (no .wizard-progress, no .history-toggle, no .person-badge, etc.) — those will be migrated to Tailwind classes directly in the JSX files.

```css
@import "tailwindcss";

/* Dark mode: toggle .dark class on <html> element */
@custom-variant dark (&:where(.dark, .dark *));

/* Design tokens — used by shadcn/ui components and custom Tailwind classes */
@theme {
  /* Brand colors (replaces #2563eb blue-600) */
  --color-brand: oklch(0.524 0.204 264.3);
  --color-brand-hover: oklch(0.455 0.212 264.2);
  --color-brand-light: oklch(0.962 0.033 264.3);

  /* Semantic colors */
  --color-success: oklch(0.510 0.141 147.1);
  --color-success-light: oklch(0.962 0.033 147.1);
  --color-danger: oklch(0.537 0.224 27.4);
  --color-danger-light: oklch(0.962 0.033 27.4);

  /* Font */
  --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

/* Global base resets — mobile-first */
*, *::before, *::after {
  box-sizing: border-box;
}

html {
  font-size: 16px; /* Prevents iOS zoom on input focus */
}

body {
  margin: 0;
  font-family: var(--font-sans);
  line-height: 1.5;
  background-color: white;
  color: oklch(0.13 0 0);
  -webkit-font-smoothing: antialiased;
}

/* Dark mode body colors */
.dark body {
  background-color: oklch(0.09 0 0);
  color: oklch(0.985 0 0);
}
```

After writing this file, verify the build still passes:
```bash
npm run build 2>&1 | tail -10
```
  </action>
  <verify>
Run: `npm run build 2>&1 | tail -10`
Expected: Build succeeds (exit 0). No CSS parse errors in output.
Run: `npm test 2>&1 | tail -20`
Expected: All existing tests pass (CSS changes should not affect test results — tests don't rely on CSS classes for behavior).
  </verify>
  <done>App.css contains only @import "tailwindcss", @custom-variant dark, @theme tokens, and minimal body/html resets. Build succeeds. All tests pass.</done>
</task>

</tasks>

<verification>
1. `npm run build` exits 0 — TypeScript compiles, Tailwind processes, no errors
2. `npm test` exits 0 — all existing component tests still pass (CSS migration has not touched any JSX yet)
3. `ls src/components/ui/` lists button.tsx, card.tsx, progress.tsx, badge.tsx
4. `grep "@tailwindcss/vite" vite.config.ts` returns a match
5. `grep "@custom-variant dark" src/App.css` returns a match
6. `grep "@import \"tailwindcss\"" src/App.css` returns a match
</verification>

<success_criteria>
- Tailwind CSS v4 is installed and wired into the Vite build pipeline via @tailwindcss/vite plugin
- shadcn/ui is initialized (new-york style) and button, card, progress, badge, sonner components are available in src/components/ui/
- App.css is a clean slate: @import tailwindcss + dark variant + design tokens only (no old BEM CSS)
- The dark: variant works via .dark class on html (verified by @custom-variant dark declaration)
- motion and sonner packages are installed
- All 28 existing tests still pass
</success_criteria>

<output>
After completion, create `.planning/phases/06-ui-improvements/06-01-SUMMARY.md` following the summary template.
</output>
