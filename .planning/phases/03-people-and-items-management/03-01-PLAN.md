---
phase: 03-people-and-items-management
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - vite.config.ts
  - vitest.config.ts
  - tsconfig.json
  - index.html
  - src/main.tsx
  - src/App.tsx
  - src/App.css
  - src/components/PeopleStep.tsx
  - src/components/PeopleStep.test.tsx
autonomous: true

must_haves:
  truths:
    - "React app renders in browser at localhost dev server"
    - "User can type a name and add a person to the bill"
    - "User can see all added people in a list"
    - "User can remove a person from the list"
    - "Existing Vitest tests still pass after Vite scaffolding"
  artifacts:
    - path: "index.html"
      provides: "HTML entry point for Vite React app"
      contains: "div id=\"root\""
    - path: "src/main.tsx"
      provides: "React DOM render entry point"
      contains: "createRoot"
    - path: "src/App.tsx"
      provides: "Root application component"
      contains: "PeopleStep"
    - path: "src/components/PeopleStep.tsx"
      provides: "People add/remove form and list"
      exports: ["PeopleStep"]
      min_lines: 40
    - path: "vite.config.ts"
      provides: "Vite dev server and build config with React plugin"
      contains: "@vitejs/plugin-react"
  key_links:
    - from: "src/components/PeopleStep.tsx"
      to: "src/stores/billStore.ts"
      via: "usePeople and useBillActions hooks"
      pattern: "usePeople|useBillActions"
    - from: "src/main.tsx"
      to: "src/App.tsx"
      via: "React DOM createRoot render"
      pattern: "createRoot.*render"
    - from: "index.html"
      to: "src/main.tsx"
      via: "Vite script module entry"
      pattern: "src/main.tsx"
---

<objective>
Scaffold the Vite + React application shell and implement the People management step -- the first interactive UI in the expense splitter.

Purpose: Phase 3 is the first UI phase. The project currently has only TypeScript library code (calculations + stores) with no rendering layer. This plan sets up the full React development environment (Vite, react-dom, JSX compilation) and builds the People step where users add and remove people from the bill. This is the foundation all subsequent UI work builds on.

Output: A working React dev server rendering the People step with add/remove functionality connected to the existing Zustand billStore.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-people-and-items-management/03-RESEARCH.md
@.planning/phases/02-state-management-and-persistence/02-01-SUMMARY.md
@src/stores/billStore.ts
@src/lib/types/bill.ts
@src/lib/types/money.ts
@vitest.config.ts
@tsconfig.json
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Vite + React application shell</name>
  <files>
    package.json
    vite.config.ts
    vitest.config.ts
    tsconfig.json
    index.html
    src/main.tsx
    src/App.tsx
    src/App.css
  </files>
  <action>
Install react-dom and Vite with React plugin as dev/dependencies:
- `npm install react-dom` (dependency - needed for rendering)
- `npm install -D vite @vitejs/plugin-react @types/react @types/react-dom` (dev dependencies)

Create `vite.config.ts` in project root:
- Import @vitejs/plugin-react and use it in plugins array
- Set resolve.alias with @ mapping to ./src (matching existing tsconfig paths)
- Set server.port to 5173 (Vite default)
- Do NOT merge with vitest.config.ts -- keep them separate. Vite config is for dev server/build, vitest.config.ts is for tests.

Update `vitest.config.ts`:
- Change test include from ['src/**/*.test.ts'] to ['src/**/*.test.{ts,tsx}'] to support .tsx test files
- Keep existing alias configuration

Update `tsconfig.json`:
- Add "jsx": "react-jsx" to compilerOptions (enables JSX transform without React import)
- Add "lib": ["ES2022", "DOM", "DOM.Iterable"] to compilerOptions (provides DOM types)
- Keep all existing options unchanged

Create `index.html` in project root:
- HTML5 boilerplate with div id="root"
- meta viewport for mobile responsiveness (width=device-width, initial-scale=1.0)
- script type="module" src="/src/main.tsx" as Vite entry point
- Title: "Expense Splitter"

Create `src/main.tsx`:
- Import ReactDOM from 'react-dom/client'
- Import App from './App' and './App.css'
- createRoot(getElementById('root')!).render(StrictMode wrapping App)

Create `src/App.tsx`:
- Functional component rendering h1 "Expense Splitter" inside main wrapper
- PeopleStep will be added in Task 2

Create `src/App.css`:
- Mobile-first CSS reset: box-sizing border-box on *, *::before, *::after
- body: margin 0, padding 16px, font-family -apple-system BlinkMacSystemFont 'Segoe UI' Roboto sans-serif, max-width 480px, margin-left/right auto, line-height 1.5, color #1a1a1a
- h1: font-size 1.5rem, margin-bottom 1rem, text-align center
- form: display flex, gap 8px, margin-bottom 1rem
- input[type="text"], input[type="number"]: flex 1, padding 12px, font-size 16px (prevents iOS zoom on focus), border 1px solid #ccc, border-radius 4px, min-height 44px
- button: padding 12px 16px, font-size 16px, border none, border-radius 4px, background #2563eb, color white, min-height 44px, cursor pointer
- button:hover: background #1d4ed8
- button:disabled: opacity 0.5, cursor not-allowed
- .remove-btn: background transparent, color #dc2626, padding 4px 8px, font-size 1.2rem, min-width 44px, min-height 44px
- .remove-btn:hover: background #fee2e2
- ul: list-style none, padding 0, margin 0
- li: display flex, justify-content space-between, align-items center, padding 8px 0, border-bottom 1px solid #eee
- .validation: text-align center, margin-top 1rem, color #666
- .error: color #dc2626
- .status: font-size 0.875rem

Add package.json scripts: "dev": "vite", "build": "vite build", "preview": "vite preview"
Keep existing "test" and "test:watch" scripts.
  </action>
  <verify>
1. `npx tsc --noEmit` -- 0 errors
2. `npm test` -- all 104 existing tests pass
3. `npm run build` -- Vite builds successfully
4. `npm run dev` -- dev server starts on localhost:5173
  </verify>
  <done>
Vite dev server starts rendering "Expense Splitter" heading. All 104 tests pass. TypeScript compiles with JSX support.
  </done>
</task>

<task type="auto">
  <name>Task 2: Implement PeopleStep component with add/remove functionality</name>
  <files>
    src/components/PeopleStep.tsx
    src/components/PeopleStep.test.tsx
    src/App.tsx
  </files>
  <action>
Create `src/components/PeopleStep.tsx`:
- Import useState from React
- Import usePeople and useBillActions from @/stores/billStore
- Import type Person from @/lib/types/bill
- Export named function component PeopleStep
- Local useState('') for name input (draft values stay local, NOT in Zustand per research anti-pattern guidance)
- Form with onSubmit handler: preventDefault, trim name, return if empty, addPerson(trimmed), clear input to ''
- autoFocus on name input, placeholder="Enter name"
- Submit button text: "Add"
- People list from usePeople() selector: ul with li items keyed by person.id
  - span for person.name
  - button with className="remove-btn", onClick={() => removePerson(person.id)}, aria-label={`Remove ${person.name}`}, text content "\u00D7" (multiplication sign)
- Validation div with className="validation" containing p with className="status" and role="status":
  - When people.length === 0: "Add at least 2 people to continue"
  - When people.length === 1: "Add 1 more person to continue"
  - When people.length >= 2: "{people.length} people added"
- Export standalone pure helper: export function canProceedFromPeople(people: Person[]): boolean { return people.length >= 2; }
  (This will be imported by the wizard nav in Plan 02)

Update `src/App.tsx`:
- Import PeopleStep from @/components/PeopleStep
- Render PeopleStep inside main below h1

Create `src/components/PeopleStep.test.tsx`:
- Import describe, it, expect from vitest
- Import canProceedFromPeople from @/components/PeopleStep
- Test suite "canProceedFromPeople":
  - it('returns false for empty array') -- canProceedFromPeople([]) === false
  - it('returns false for 1 person') -- canProceedFromPeople([{id:'1',name:'Alice'}]) === false
  - it('returns true for 2 people') -- true
  - it('returns true for 3+ people') -- true
- Do NOT test React component rendering (no react-testing-library installed)
  </action>
  <verify>
1. `npm test` -- 108 tests pass (104 existing + 4 new)
2. `npx tsc --noEmit` -- 0 errors
3. Browser at localhost:5173: add people, remove people, validation updates, persists on refresh
  </verify>
  <done>
PeopleStep renders with add/remove connected to billStore. Validation shows contextual messages. canProceedFromPeople exported and tested. 108 tests pass.
  </done>
</task>

</tasks>

<verification>
1. `npm test` passes 108 tests (104 existing + 4 new)
2. `npx tsc --noEmit` compiles with 0 errors
3. `npm run dev` starts Vite dev server
4. Browser shows working PeopleStep with add/remove/validation
5. People persist across page refresh via Zustand localStorage
</verification>

<success_criteria>
- Vite + React dev environment functional (dev server, build, JSX)
- PeopleStep with add/remove connected to billStore
- People persist across refresh via Zustand persist middleware
- Validation reports when fewer than 2 people
- 108 tests pass (104 existing + 4 new)
- Mobile-friendly layout (480px max, 44px touch targets, 16px fonts)
</success_criteria>

<output>
After completion, create `.planning/phases/03-people-and-items-management/03-01-SUMMARY.md`
</output>
